generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DB_URL")
}

model User {
  id            String          @id @default(uuid())
  email         String          @unique
  picture_url   String?
  first_name    String?
  last_name     String?
  phone         String?
  password      String?
  created_at    DateTime        @default(now())
  updated_at    DateTime?       @updatedAt
  AuthChallenge AuthChallenge[]
}

model AuthChallenge {
  id         String    @id @default(uuid())
  user_id    String
  code       String
  expired_at DateTime
  created_at DateTime  @default(now())
  updated_at DateTime? @updatedAt
  user       User      @relation(fields: [user_id], references: [id])
}

model Subject {
  id         String    @id @default(uuid())
  name       String
  gov_id     String?
  phone      String?
  created_at DateTime  @default(now())
  updated_at DateTime? @updatedAt
  Issue      Issue[]
}

model Issue {
  id         String    @id @default(uuid())
  subject_id String
  title      String?
  content    String?
  status     String?   @default("open")
  priority   String?   @default("normal")
  created_at DateTime  @default(now())
  updated_at DateTime? @updatedAt
  subject    Subject   @relation(fields: [subject_id], references: [id])
}

model Resident {
  id              String    @id @default(uuid())
  gov_id          String?
  first_name      String?
  last_name       String?
  age             Int?
  phone           String?
  mother_name     String?
  father_name     String?
  sex             Int?
  year_of_birth   Int?
  month_of_birth  Int?
  day_of_birth    Int?
  status          Int?
  personal_status Int?
  created_at      DateTime?  @default(now())
  updated_at      DateTime? @updatedAt
}
